<!-- components/formulario_cliente.html -->
<form method="post" action="{{ action_url }}" class="needs-validation" novalidate>
    {% csrf_token %}
    
    <div class="row g-3">
        <!-- Nombre -->
        <div class="col-12">
            <label for="nombre" class="form-label">Nombre completo *</label>
            <input type="text" class="form-control" id="nombre" name="nombre" 
                   value="{{ form.nombre.value|default:'' }}" required>
            <div class="invalid-feedback">
                Por favor ingresa tu nombre completo.
            </div>
        </div>

        <!-- Email -->
        <div class="col-12">
            <label for="email" class="form-label">Email *</label>
            <input type="email" class="form-control" id="email" name="email" 
                   value="{{ form.email.value|default:'' }}" required>
            <div class="invalid-feedback">
                Por favor ingresa un email v√°lido.
            </div>
        </div>

        <!-- Tel√©fono -->
        <div class="col-12">
            <label for="telefono" class="form-label">Tel√©fono *</label>
            <input type="tel" class="form-control" id="telefono" name="telefono" 
                   value="{{ form.telefono.value|default:'' }}" required>
            <div class="invalid-feedback">
                Por favor ingresa tu n√∫mero de tel√©fono.
            </div>
        </div>

        <!-- Direcci√≥n -->
        <div class="col-12">
            <label for="direccion" class="form-label">Direcci√≥n de entrega *</label>
            <textarea class="form-control" id="direccion" name="direccion" rows="2" 
                      placeholder="Direcci√≥n donde deseas recibir tu pedido..." required>{{ form.direccion.value|default:'' }}</textarea>
            <div class="invalid-feedback">
                Por favor ingresa la direcci√≥n de entrega o evento.
            </div>
        </div>

        <!-- ‚úÖ FECHA DE EVENTO - Campo OBLIGATORIO -->
        <div class="col-12">
            <label for="fecha_evento" class="form-label">üìÖ Fecha de entrega *</label>
            <input type="date" class="form-control" id="fecha_evento" name="fecha_evento" 
                   value="{{ form.fecha_evento.value|default:'' }}"
                   min="{{ hoy|date:'Y-m-d' }}" required>
            <div class="invalid-feedback">
                Por favor selecciona la fecha de entrega.
            </div>
        </div>

        <!-- ‚úÖ DETALLES ADICIONALES - √öNICO CAMPO OPCIONAL -->
        <div class="col-12">
            <label for="detalles" class="form-label">üìù Detalles adicionales</label>
            <textarea class="form-control" id="detalles" name="detalles" rows="4" 
                      placeholder="Si tienes algun detalle importante que mencionar, agregalo aqu√≠...">{{ form.detalles.value|default:'' }}</textarea>
            <div class="form-text text-muted">
                Opcional - Ay√∫danos a personalizar tu pedido
            </div>
        </div>

        <!-- Bot√≥n de env√≠o -->
        <div class="col-12 mt-4">
            <button type="submit" class="btn w-100 text-white py-2 fw-semibold" 
                    style="background-color:#ff8c42; font-size:1.1rem;">
                ‚úÖ Confirmar Pedido
            </button>
        </div>
    </div>
</form>

<script>
document.addEventListener("DOMContentLoaded", function() {
    // Establecer fecha m√≠nima como hoy
    const hoy = new Date().toISOString().split('T')[0];
    document.getElementById('fecha_evento').min = hoy;
    
    // Validaci√≥n de formulario
    const forms = document.querySelectorAll('.needs-validation');
    Array.from(forms).forEach(form => {
        form.addEventListener('submit', event => {
            if (!form.checkValidity()) {
                event.preventDefault();
                event.stopPropagation();
            }
            form.classList.add('was-validated');
        }, false);
    });
});
</script>